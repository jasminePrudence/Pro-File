<!DOCTYPE html>
<html>
<head>
    <title>Fichier Nettoy√©</title>
    <link href="../static/css/result.css" rel="stylesheet">
    <link href="../static/css/styles.css" rel="stylesheet" />
</head>
<body class="masthead3 text-white">
    <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
        <div class="header container d-flex justify-content-between px-4 px-lg-5">
            <a class="navbar-brand" href="{{ url_for('home') }}#page-top">Pro_Files</a> <!-- Align√© √† gauche -->
            <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto my-2 my-lg-0">
                    <li class="nav-item">
                        <a class="nav-link btn btn-primary" id="bouton-clignotant" href="{{ url_for('treatment') }}">üîô Retour</a> <!-- Align√© √† droite -->
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="body-header">
        <h2>Votre fichier a √©t√© trait√© !</h2>
        <div class="container2">
            <a href="/download/{{ filename }}" id="toggleLink">T√©l√©charger le fichier trait√©</a><br>
            <p id="hiddenText"> Satisfait &#128515; ? cliquez sur <button id="likeBtn" class="like-button">J'aime üëç <span id="likeCount" class="counter">(0)</span></button>
            <!-- <p> Satisfait &#128515; ? cliquez sur <button id="likeButton">J'aimeüëç(<span id="likeCount">0</span>)</button> -->
            </p>
        </div>
        <h3>Apercu :</h3>
        <iframe src="{{ pdf_url }}" width="100%" height="600px"></iframe>
        {% if extracted_text %}
            <h2>Texte extrait :</h2>
            <pre>{{ extracted_text }}</pre>
        {% else %}
            <p>Aucun texte extrait.</p>
        {% endif %}
        
        {% if filename %}
            <p>Nom du fichier : {{ filename }}</p>
        {% endif %}

        {% if message %}
            <div class="alert alert-success">
                {{ message }} {{encod}}
            </div>
        {% endif %}
        
        {% if data %}
            {% if data|length > 0 %}
                {% for record in data %}
                    <li>{{ record | join(' , ') }}</li>
                {% endfor %}
            {% else %}
                <p>Aucun contenu √† afficher.</p>
            {% endif %}    
        {% endif %}
        {% if orig_size %}     
            <h2 class="mt-4 text-muted">D√©tails de la compression</h2>
            <table class="table table-bordered mt-3 text-white">
                <thead>
                    <tr>
                        <th>Taille Originale (bytes)</th>
                        <th>Taille Comprim√©e (bytes)</th>
                        <th>Ratio de Compression</th>
                        <th>Nom</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{ orig_size | default('N/A') }}</td>
                        <td>{{ compressed_size | default('N/A') }}</td>
                        <td><span class="green">{{ ratio }}</span></br> (NB: Plus le ratio est faible, plus la compression est efficace.)</td>
                        <td>{{ compressed_path | default('N/A') }}</td>
                    </tr>
                </tbody>
            </table>
            
            <!-- <h3 class="mt-4">T√©l√©chargement du PDF Comprim√©</h3> -->
            <a href="/download/{{ filename }}" class="btn btn-success" download>T√©l√©charger le PDF Compress√©</a>
        
        {% endif %} 
    </div> 
    <script src="../static/js/scripts.js"></script>
    <script src="../static/js/result.js"></script>

</body>
</html>
